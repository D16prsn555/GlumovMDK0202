<Window x:Class="Glumov0202.PartnerEditWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Редактирование заявки партнера"
        Height="800" Width="1300"
        WindowStartupLocation="CenterScreen">

    <Grid Margin="20">

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="28*"/>
            <ColumnDefinition Width="18"/>
            <ColumnDefinition Width="41*"/>
        </Grid.ColumnDefinitions>

        <!-- Заголовок окна -->
        <TextBlock Grid.Row="0"
                   Grid.Column="1"
                   Grid.ColumnSpan="2"
                   Text="ДАННЫЕ ПАРТНЕРА И ЗАЯВКИ"
                   FontSize="16"
                   FontWeight="Bold"
                   Foreground="#0C4882"
                   Margin="12,0,0,20"
                   HorizontalAlignment="Left"
                   Width="250"/>

        <!-- Информация о партнере -->
        <GroupBox Grid.Column="0"
                  Grid.RowSpan="2"
                  Header="Информация о партнере"
                  Padding="10"
                  Margin="0,40,0,0">

            <StackPanel Orientation="Vertical">

                <!-- Тип партнера -->
                <Label Content="Тип партнера:" FontWeight="SemiBold"/>
                <ComboBox x:Name="PartnerTypeComboBox"
                          Margin="0,5,0,15"
                          DisplayMemberPath="Name"
                          SelectedValuePath="ID"/>

                <!-- Название -->
                <Label Content="Наименование компании:" FontWeight="SemiBold"/>
                <TextBox x:Name="NameTextBox" Margin="0,5,0,15" Padding="5"/>

                <!-- Директор -->
                <Label Content="ФИО директора:" FontWeight="SemiBold"/>
                <TextBox x:Name="DirectorTextBox" Margin="0,5,0,15" Padding="5"/>

                <!-- Адрес -->
                <Label Content="Юридический адрес:" FontWeight="SemiBold"/>
                <TextBox x:Name="AddressTextBox" Margin="0,5,0,15" Padding="5"/>

                <!-- Рейтинг -->
                <Label Content="Рейтинг:" FontWeight="SemiBold"/>
                <TextBox x:Name="RatingTextBox" Margin="0,5,0,15" Padding="5"/>

                <!-- Телефон -->
                <Label Content="Телефон:" FontWeight="SemiBold"/>
                <TextBox x:Name="PhoneTextBox" Margin="0,5,0,15" Padding="5"/>

                <!-- Email -->
                <Label Content="Email:" FontWeight="SemiBold"/>
                <TextBox x:Name="EmailTextBox" Margin="0,5,0,15" Padding="5"/>

            </StackPanel>
        </GroupBox>

        <!-- БЛОК: Информация о заявке -->
        <GroupBox Grid.Column="2"
                  Grid.RowSpan="2"
                  Header="Информация о заявке"
                  Padding="10"
                  Margin="0,40,0,0">

            <StackPanel Orientation="Vertical">

                <!-- Продукция -->
                <Label Content="Продукция:" FontWeight="SemiBold"/>
                <ComboBox x:Name="ProductComboBox"
                          Margin="0,5,0,15"
                          DisplayMemberPath="Name"
                          SelectedValuePath="ID"
                          SelectionChanged="ProductComboBox_SelectionChanged"/>

                <!-- Количество -->
                <Label Content="Количество:" FontWeight="SemiBold"/>
                <TextBox x:Name="CountTextBox"
                         Margin="0,5,0,15"
                         Padding="5"
                         PreviewTextInput="CountTextBox_PreviewTextInput"
                         Text="1"/>

                <!-- Стоимость единицы -->
                <Label Content="Минимальная стоимость за единицу:" FontWeight="SemiBold"/>
                <TextBlock x:Name="UnitCostTextBlock"
                           Margin="0,5,0,15"
                           Padding="5"
                           FontWeight="Bold"
                           Foreground="#0C4882"
                           Text="0.00 руб."/>

                <!-- Добавление продукта в заявку -->
                <Button x:Name="AddProductButton"
                        Content="Добавить продукт в заявку"
                        Click="AddProductButton_Click"
                        Padding="10,5"
                        Margin="0,10,0,15"
                        Background="#0C4882"
                        Foreground="White"
                        FontWeight="Bold"/>

                <!-- Таблица товаров в заявке -->
                <Label Content="Продукты в заявке:" FontWeight="SemiBold" Margin="0,0,0,5"/>

                <DataGrid x:Name="ProductsDataGrid"
                          Height="200"
                          Margin="0,5,0,10"
                          AutoGenerateColumns="False"
                          IsReadOnly="True">

                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Продукт" Binding="{Binding ProductName}" Width="*"/>
                        <DataGridTextColumn Header="Кол-во" Binding="{Binding Count}" Width="80"/>
                        <DataGridTextColumn Header="Цена" Binding="{Binding UnitCost, StringFormat={}{0:N2} руб.}" Width="100"/>
                        <DataGridTextColumn Header="Стоимость" Binding="{Binding TotalCost, StringFormat={}{0:N2} руб.}" Width="120"/>

                        <!-- Кнопка удаления строки -->
                        <DataGridTemplateColumn Header="" Width="60">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Удалить"
                                            Padding="5,2"
                                            Click="RemoveProductButton_Click"
                                            BorderThickness="0"
                                            FontSize="10"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>

                </DataGrid>

                <!-- Общая стоимость -->
                <Border Background="#0C4882"
                        Padding="10"
                        Margin="0,10,0,0">
                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Center">
                        <TextBlock Text="Общая стоимость заявки: "
                                   FontWeight="Bold"
                                   Foreground="White"/>
                        <TextBlock x:Name="TotalCostTextBlock"
                                   Text="0.00 руб."
                                   FontWeight="Bold"
                                   Foreground="White"
                                   FontSize="14"/>
                    </StackPanel>
                </Border>

            </StackPanel>
        </GroupBox>

        <!-- Нижняя панель кнопок -->
        <StackPanel Grid.Row="2"
                    Grid.Column="1"
                    Grid.ColumnSpan="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Left"
                    Margin="15,15,0,0"
                    Width="500">

            <!-- Удаление заявки -->
            <Button x:Name="DeleteButton"
                    Content="Удалить заявку"
                    Click="DeleteButton_Click"
                    Padding="15,10"
                    FontWeight="Bold"
                    Margin="0,0,10,0"
                    Background="#0C4882"
                    Foreground="White"
                    BorderThickness="0"/>

            <!-- Сохранение заявки -->
            <Button x:Name="SaveButton"
                    Content="Сохранить заявку"
                    Click="SaveButton_Click"
                    Padding="20,10"
                    FontWeight="Bold"
                    Margin="0,0,10,0"
                    Background="#0C4882"
                    Foreground="White"
                    BorderThickness="0"/>

            <!-- Отмена -->
            <Button x:Name="CancelButton"
                    Content="Отмена"
                    Click="CancelButton_Click"
                    Padding="20,10"
                    FontWeight="Bold"
                    Background="#0C4882"
                    Foreground="White"
                    BorderThickness="0"/>
        </StackPanel>

    </Grid>
</Window>
